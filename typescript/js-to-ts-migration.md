# Миграция с JavaScript на TypeScript

## Что лучше не делать

- Изменять функциональность того участка кода, который переписывается на TypeScript.
- Мигрировать при низком степени покрытия тестами.
- Не стараться очень строго всё типизировать с самого начала, т.к. это может привести к дополнительной работе, когда в дальнейшем выявятся несовместимости типов.
- Не добавлять тесты для типов.

## Этапы миграции

1. Компилировать в "свободном режиме".
   - Проверить, что все тесты проходят успешно.
   - Изменить тип файла на с `.js` на `.ts`. Создать `tsconfig.json` в корне проекта. Разрешить неявное `any`.
   - Поправить только тот код, который приводит к ошибкам компиляции.
   - Не изменять функциональность кода.
   - Проверить, что все тесты проходят успешно.
2. Явное `any`.
   - Проверить, что все тесты проходят успешно.
   - Запретить неявное `any`, добавив `"noImplicitAny": true` в `compilerOptions` свойство в `tsconfig.json`.
   - Где возможно указать явный тип, если такой возможности нет, явно указать `any`. Импортировать типы для зависимостей из [DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped).
   - Проверить, что все тесты проходят успешно.
3. Заменить явное `any` и включить `strict mode`.
   - добавить `tsconfig.json`: `"strict": true`, `"strictFunctionTypes": true`, `"strictNullChecks": true` и `"strictBindCallApply": true`.
   - Постепенно небольшими частями менять явное `any` на более подходящий тип.

## Ссылка

- [Frontend Masters. TypeScript 3 Fundamentals, v2. Converting to TypeScript](https://frontendmasters.com/courses/typescript-v2/)
